{% macro show_messages() %}
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="container mt-3">
                {% for category, message in messages %}
                <div class="alert alert-{{ category }} alert-dismissible fade show flash-alert" role="alert" data-dismiss-time="5000">
                    {{ message }}
                </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}
{% endmacro %}

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const alerts = document.querySelectorAll('.flash-alert');
        alerts.forEach(function(alert) {
            const dismissTime = alert.getAttribute('data-dismiss-time') || 5000;
            
            setTimeout(function() {
                alert.classList.add('fade');  
            }, dismissTime);

            setTimeout(function() {
                alert.remove();
            }, dismissTime + 1000); 
        });
    });
</script>

<style>
    .fade {
        opacity: 0;
        transition: opacity 1s ease-out;
    }
</style>
